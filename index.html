<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Amatcha Runner</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: fixed;
        }

        body {
            background: linear-gradient(to bottom, #87CEEB 0%, #E0F6FF 100%);
            font-family: Arial, sans-serif;
            touch-action: none;
        }

        #gameContainer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        #gameCanvas {
            display: block;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        #ui {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        #score {
            position: absolute;
            top: 15px;
            left: 15px;
            font-size: 24px;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            z-index: 10;
        }

        .screen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 30px 40px;
            border-radius: 20px;
            text-align: center;
            display: none;
            max-width: 90%;
            pointer-events: all;
        }

        .screen.active {
            display: block;
        }

        .screen h1 {
            font-size: 32px;
            color: #333;
            margin-bottom: 20px;
        }

        .screen p {
            font-size: 18px;
            color: #666;
            margin: 10px 0;
        }

        .screen button {
            margin-top: 20px;
            padding: 15px 40px;
            font-size: 20px;
            background: #2ecc71;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
        }

        .screen button:active {
            background: #27ae60;
            transform: scale(0.98);
        }

        #instruction {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.9);
            font-size: 16px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        @media (min-width: 768px) {
            #score { font-size: 32px; top: 25px; left: 30px; }
            .screen { padding: 50px 80px; }
            .screen h1 { font-size: 48px; margin-bottom: 30px; }
            .screen p { font-size: 24px; }
            .screen button { padding: 20px 50px; font-size: 24px; }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        
        <div id="ui">
            <div id="score">Body: 0</div>
            <div id="instruction">üëÜ Klepnƒõte pro skok</div>
            
            <div id="startScreen" class="screen active">
                <h1>üçπ Amatcha Runner</h1>
                <p>Sb√≠rejte plechovky a vyh√Ωbejte se kaktus≈Øm!</p>
                <button id="startBtn">START HRY</button>
            </div>
            
            <div id="gameOverScreen" class="screen">
                <h1>GAME OVER!</h1>
                <p>Va≈°e sk√≥re: <span id="finalScore">0</span></p>
                <button id="restartBtn">HR√ÅT ZNOVU</button>
            </div>
        </div>
    </div>

    <script>
        // Canvas setup
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // UI elements
        const scoreEl = document.getElementById('score');
        const instructionEl = document.getElementById('instruction');
        const startScreen = document.getElementById('startScreen');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const startBtn = document.getElementById('startBtn');
        const restartBtn = document.getElementById('restartBtn');
        const finalScoreEl = document.getElementById('finalScore');

        // Resize canvas
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Game state
        let gameState = 'start'; // 'start', 'playing', 'gameOver'
        let score = 0;
        let speed = 4;
        let frame = 0;

        // Player
        const player = {
            x: 80,
            y: 0,
            width: 40,
            height: 50,
            velocityY: 0,
            gravity: 0.8,
            jumpPower: -15,
            isJumping: false,
            
            get groundY() {
                return canvas.height - 100;
            },
            
            reset() {
                this.y = this.groundY;
                this.velocityY = 0;
                this.isJumping = false;
            },
            
            jump() {
                if (!this.isJumping && gameState === 'playing') {
                    this.isJumping = true;
                    this.velocityY = this.jumpPower;
                }
            },
            
            update() {
                if (this.isJumping) {
                    this.velocityY += this.gravity;
                    this.y += this.velocityY;
                    
                    if (this.y >= this.groundY) {
                        this.y = this.groundY;
                        this.isJumping = false;
                        this.velocityY = 0;
                    }
                }
            },
            
            draw() {
                // Body
                ctx.fillStyle = '#2ecc71';
                ctx.fillRect(this.x, this.y, this.width, this.height);
                
                // Face
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.arc(this.x + 12, this.y + 15, 5, 0, Math.PI * 2);
                ctx.arc(this.x + 28, this.y + 15, 5, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = '#000';
                ctx.beginPath();
                ctx.arc(this.x + 12, this.y + 15, 2, 0, Math.PI * 2);
                ctx.arc(this.x + 28, this.y + 15, 2, 0, Math.PI * 2);
                ctx.fill();
                
                // Smile
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(this.x + 20, this.y + 25, 10, 0.1, Math.PI - 0.1);
                ctx.stroke();
            }
        };

        // Obstacles
        const obstacles = [];
        let obstacleTimer = 0;
        const obstacleDelay = 100;

        function createObstacle() {
            const height = 30 + Math.random() * 40;
            obstacles.push({
                x: canvas.width,
                y: player.groundY + player.height - height,
                width: 25,
                height: height
            });
        }

        function updateObstacles() {
            obstacleTimer++;
            if (obstacleTimer > obstacleDelay) {
                createObstacle();
                obstacleTimer = 0;
            }

            for (let i = obstacles.length - 1; i >= 0; i--) {
                obstacles[i].x -= speed;

                // Check collision
                if (checkCollision(player, obstacles[i])) {
                    endGame();
                }

                // Remove off-screen
                if (obstacles[i].x + obstacles[i].width < 0) {
                    obstacles.splice(i, 1);
                }
            }
        }

        function drawObstacles() {
            ctx.fillStyle = '#2d5016';
            for (let obs of obstacles) {
                ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
                
                // Spines
                ctx.fillStyle = '#fff';
                for (let i = 0; i < obs.height; i += 10) {
                    ctx.fillRect(obs.x + 2, obs.y + i, 1, 3);
                    ctx.fillRect(obs.x + obs.width - 3, obs.y + i + 5, 1, 3);
                }
                ctx.fillStyle = '#2d5016';
            }
        }

        // Load can images
        const canImages = [];
        let imagesLoaded = 0;
        
        const imageData = {
            grapefruit: 'data:image/png;base64,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',
            lime: 'data:image/png;base64,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',
            pineapple: 'data:image/png;base64,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'
        }
        
        // Load all three cans
        Object.keys(imageData).forEach(key => {
            const img = new Image();
            img.onload = () => {
                imagesLoaded++;
                canImages.push(img);
                console.log(key + ' loaded');
            };
            img.src = imageData[key];
        });

        // Collectibles with can images
        const collectibles = [];
        let collectibleTimer = 0;
        const collectibleDelay = 120;

        function createCollectible() {
            if (canImages.length === 0) return; // Wait for images
            
            const img = canImages[Math.floor(Math.random() * canImages.length)];
            collectibles.push({
                x: canvas.width,
                y: canvas.height * 0.3 + Math.random() * (canvas.height * 0.2),
                width: 35,
                height: 60,
                image: img
            });
        }

        function updateCollectibles() {
            collectibleTimer++;
            if (collectibleTimer > collectibleDelay) {
                createCollectible();
                collectibleTimer = 0;
            }

            for (let i = collectibles.length - 1; i >= 0; i--) {
                collectibles[i].x -= speed;

                // Check collection (using rectangle collision)
                const c = collectibles[i];
                if (player.x < c.x + c.width &&
                    player.x + player.width > c.x &&
                    player.y < c.y + c.height &&
                    player.y + player.height > c.y) {
                    score++;
                    scoreEl.textContent = 'Body: ' + score;
                    collectibles.splice(i, 1);
                    
                    // Speed up every 10 points
                    if (score % 10 === 0) {
                        speed += 0.5;
                    }
                } else if (c.x + c.width < 0) {
                    collectibles.splice(i, 1);
                }
            }
        }

        function drawCollectibles() {
            for (let c of collectibles) {
                if (c.image && c.image.complete) {
                    ctx.drawImage(c.image, c.x, c.y, c.width, c.height);
                }
            }
        }

        // Collision detection
        function checkCollision(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
                   rect1.x + rect1.width > rect2.x &&
                   rect1.y < rect2.y + rect2.height &&
                   rect1.y + rect1.height > rect2.y;
        }

        // Draw background
        function drawBackground() {
            // Sky (already in CSS)
            
            // Sun
            ctx.fillStyle = 'rgba(255, 220, 100, 0.6)';
            ctx.beginPath();
            ctx.arc(canvas.width * 0.85, canvas.height * 0.15, 40, 0, Math.PI * 2);
            ctx.fill();

            // Ground
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(0, player.groundY + player.height, canvas.width, canvas.height);

            // Grass
            ctx.fillStyle = '#228B22';
            ctx.fillRect(0, player.groundY + player.height - 5, canvas.width, 5);
        }

        // Game loop
        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            drawBackground();

            if (gameState === 'playing') {
                frame++;
                player.update();
                updateObstacles();
                updateCollectibles();
            }

            player.draw();
            drawObstacles();
            drawCollectibles();

            requestAnimationFrame(gameLoop);
        }

        // Game control
        function startGame() {
            gameState = 'playing';
            score = 0;
            speed = 4;
            frame = 0;
            obstacles.length = 0;
            collectibles.length = 0;
            obstacleTimer = 50; // Small delay at start
            collectibleTimer = 0;
            
            player.reset();
            
            scoreEl.textContent = 'Body: 0';
            startScreen.classList.remove('active');
            gameOverScreen.classList.remove('active');
            instructionEl.style.display = 'block';
        }

        function endGame() {
            gameState = 'gameOver';
            finalScoreEl.textContent = score;
            gameOverScreen.classList.add('active');
            instructionEl.style.display = 'none';
        }

        // Input handling
        function handleTap(e) {
            e.preventDefault();
            
            if (gameState === 'playing') {
                player.jump();
            }
        }

        // Event listeners
        canvas.addEventListener('click', handleTap);
        canvas.addEventListener('touchstart', handleTap, { passive: false });

        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' && gameState === 'playing') {
                e.preventDefault();
                player.jump();
            }
        });

        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', startGame);

        // Prevent page scrolling
        document.body.addEventListener('touchmove', (e) => {
            e.preventDefault();
        }, { passive: false });

        // Start game loop
        player.reset();
        gameLoop();

        console.log('Amatcha Runner loaded successfully!');
        console.log('Tap START to play');
    </script>
</body>
</html>
